# 线性代数计算系统 (Linear Algebra Calculation System)

## 项目简介

这是一个基于分数表示法的命令行交互式线性代数计算辅助程序，采用C++17开发。系统使用任意精度分数运算确保计算的绝对精确性，提供了丰富的线性代数功能和友好的终端用户界面(TUI)。

### 系统架构

系统采用模块化设计，主要包含以下层次：

```
┌───────────────────────────────────────┐
│         用户界面层 (TUI)                │
│  ┌─────────────┐ ┌─────────────────┐  │
│  │  应用主界面  │ │   矩阵编辑器      │  │
│  └─────────────┘ └─────────────────┘  │
└─────────────────┬─────────────────────┘
                  │
┌─────────────────┴─────────────────────┐
│       语法解析层                        │
│  ┌─────────────┐ ┌─────────────────┐  │
│  │  词法分析器   │ │   语法分析器      │  │
│  └─────────────┘ └─────────────────┘  │
│  ┌─────────────────────────────────┐  │
│  │        表达式解释器                │  │
│  └─────────────────────────────────┘  │
└─────────────────┬─────────────────────┘
                  │
┌─────────────────┴─────────────────────┐
│       计算核心层                        │
│  ┌─────────────┐ ┌─────────────────┐  │
│  │  矩阵操作类   │ │   历史记录系统     │  │
│  └─────────────┘ └─────────────────┘  │
└─────────────────┬─────────────────────┘
                  │
┌─────────────────┴─────────────────────┐
│       数据类型层                        │
│  ┌─────────────┐ ┌─────────────────┐  │
│  │   分数类     │ │     矩阵类        │  │
│  └─────────────┘ └─────────────────┘  │
│  ┌─────────────┐ ┌─────────────────┐  │
│  │   向量类     │ │     结果类        │  │
│  └─────────────┘ └─────────────────┘  │
└───────────────────────────────────────┘
```


### 核心特性

- **🎯 精确计算**: 使用Boost任意精度分数，避免浮点数误差
- **🔧 丰富功能**: 支持矩阵、向量的各种基础与高级运算
- **📖 步骤展示**: 详细记录并可视化展示计算过程
- **💻 交互界面**: 现代化TUI界面，支持命令提示、历史记录
- **📝 表达式解析**: 自然数学表达式输入，智能语法解析
- **💾 数据管理**: 变量存储、文件导入导出、CSV格式支持
- **🎨 视觉效果**: 彩色输出、矩阵可视化编辑器
- **🔄 模块设计**: 模块化，易于扩展和维护

## 功能详览

### 基础运算
- **矩阵运算**: 加法(+)、减法(-)、数乘(*)、矩阵乘法(*)、转置
- **向量运算**: 加法(+)、减法(-)、数乘(*)、点积(*)、叉积(x)
- **分数运算**: 四则运算，自动化简

### 高级运算
- **行列式计算**: 
  - `det(A)` - 默认高斯消元法
  - `det_expansion(A)` - 代数余子式按行列展开
- **逆矩阵计算**:
  - `inverse(A)` - 伴随矩阵法
  - `inverse_gauss(A)` - 高斯-若尔当消元法
- **矩阵分解与变换**:
  - `ref(A)` - 行阶梯形
  - `rref(A)` - 最简行阶梯形
  - `rank(A)` - 矩阵秩计算
- **代数结构**:
  - `cofactor_matrix(A)` - 代数余子式矩阵
  - `adjugate(A)` - 伴随矩阵

### 向量专用函数
- `dot(v1, v2)` - 向量点积
- `cross(v1, v2)` - 向量叉积(三维)
- `norm(v)` - 向量模长
- `normalize(v)` - 向量归一化

## 使用指南

### 构建程序

如果git仓库中没有CMakeLists.txt和boost库的源代码则需要去Release中下载SourceCode.zip源代码打包文件
```bash
git clone https://github.com/yzzxzinbin/LinearAlgebraCalSys.git
cd ./LinearAlgebraCalSys
cmake ./
make
```

### 启动程序
```bash
cd build/bin
./LinearAlgebraCalSys
```

### 基本语法

#### 变量定义
```plaintext
let a = 3/4          # 定义分数变量a
let b = 2            # 定义整数变量b
let c = 1.5          # 定义浮点变量c
```

#### 矩阵与向量定义
```plaintext
matrix A = [[1, 2 ; 3, 4]]       # 定义2x2矩阵A (使用分号分隔行)
matrix B = [[1, 0 ; 0, 1]]       # 定义单位矩阵
vector v = [1, 2, 3]             # 定义三维向量v
vector u = [4, 5, 6]             # 定义三维向量u
m1 = [1,2,3;4,5,6]              # 简化矩阵定义语法
v1 = [1,2,3]                    # 简化向量定义语法
f1 = 3/4                        # 简化分数定义语法
```

#### 基本运算表达式
```plaintext
A + B                           # 矩阵加法
A - B                           # 矩阵减法
A * B                           # 矩阵乘法
3 * A                           # 数乘矩阵
v + u                           # 向量加法
v - u                           # 向量减法
2 * v                           # 数乘向量
v * u                           # 向量点积(返回分数)
v x u                           # 向量叉积(仅三维向量,返回向量)
```

#### 矩阵函数调用
```plaintext
transpose(A)                    # 矩阵转置
inverse(A)                      # 矩阵求逆(伴随矩阵法)
inverse_gauss(A)                # 矩阵求逆(高斯-若尔当消元法)
det(A)                          # 行列式计算(默认高斯消元法)
det_expansion(A)                # 行列式计算(代数余子式按行列展开)
rank(A)                         # 矩阵秩计算
ref(A)                          # 行阶梯形变换
rref(A)                         # 最简行阶梯形变换
cofactor_matrix(A)              # 代数余子式矩阵
adjugate(A)                     # 伴随矩阵
```

#### 向量专用函数
```plaintext
dot(v, u)                       # 向量点积
cross(v, u)                     # 向量叉积(限三维向量)
norm(v)                         # 向量模长
normalize(v)                    # 向量归一化
```

#### 系统命令
```plaintext
help                            # 显示帮助信息
clear                           # 清屏
clear -h                        # 清除命令历史
clear -v                        # 清除所有变量
clear -a                        # 清屏+清除历史+清除变量
vars                            # 显示所有变量的详细内容
vars -l                         # 显示变量列表(仅名称和类型)
show <变量名>                    # 显示指定变量
steps                           # 切换计算步骤显示模式
exit                            # 退出程序
```

#### 变量管理命令
```plaintext
del <变量名>                     # 删除指定变量
rename <旧变量名> <新变量名>      # 重命名变量
```

#### 文件操作命令
```plaintext
export <文件名>                  # 导出所有变量和历史到文件
import <文件名>                  # 从文件导入变量和历史
csv <变量名>                     # 将Matrix/Vector/Result类型变量导出为CSV文件
```

#### 矩阵/向量编辑器命令
```plaintext
new <行数> <列数>                # 创建新矩阵并进入编辑器
new <维数>                      # 创建新向量并进入编辑器
edit <变量名>                   # 编辑已有矩阵或向量
```

#### show命令高级格式化选项
```plaintext
show <变量名> -f<精度>           # 以指定有效数字显示(如: show A -f6)
show <变量名> -p<小数位数>       # 以指定小数位数显示(如: show A -p2)
show <变量名> -f<精度> -r<结果变量名>  # 格式化显示并保存结果
show <变量名> -p<小数位数> -r<结果变量名>  # 小数格式显示并保存结果
```

#### 复合表达式示例
```plaintext
# 计算矩阵A的逆并验证
let inv_A = inverse(A)
A * inv_A                       # 应得到单位矩阵

# 解线性方程组 Ax = b
let x = inverse(A) * b          # 求解向量x

# 向量运算组合
let result = normalize(cross(v, u))  # 归一化叉积结果

# 复杂矩阵运算
det(transpose(A) * A)           # 计算A^T * A的行列式

# 使用不同方法计算逆矩阵并比较
let inv1 = inverse(A)           # 伴随矩阵法
let inv2 = inverse_gauss(A)     # 高斯-若尔当法
```

#### 注释语法
```plaintext
# 这是单行注释
let a = 1/2  # 行末注释也支持
```

#### 语句结束符
```plaintext
# 大多数命令和表达式可以选择性地以分号结尾
let a = 3/4;                    # 分号可选
help;                           # 分号可选
det(A);                         # 分号可选
```

#### 交互功能
- 支持**Tab键自动补全**函数名和命令
- 使用**上下箭头键**浏览历史命令
- 支持**智能语法提示**，显示可用函数和命令建议
- **步骤显示模式**: 使用`steps`命令开启/关闭详细计算过程展示



